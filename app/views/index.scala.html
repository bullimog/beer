
@(sequence: model.ReadableSequence)

@main("Beer Title") {
<div style="width:400px;">
    <fieldset>
        <legend>Thermostats</legend>
        <fieldset>
            <legend>Boiler</legend>
        <p>
            <label></label>
            <input type="radio" name="boiler" value="on" checked>On
            <input type="radio" name="boiler" value="off" checked>Off
        </p>
        <p>
            <label>Temperature:</label>
            <input type="number" min="0" max="100" value="22" size="3">&deg;c
        </p>
        <p>
            <label>Thermometer:</label>
            20 &deg;c
        </p>
        <p>
            <label>Heater:</label>
            100%
        </p>
        </fieldset>
    </fieldset>

    <fieldset>
        <legend>Devices</legend>
    <p>
        <label>Pump:</label>
        <input type="radio" name="pump" value="on" checked>On
        <input type="radio" name="pump" value="off" checked>Off
    </p>
    <p>
        <label>Thermometer:</label>
        22 &deg;c
    </p>
    <p>
        <label>Heater:</label>
        <input type="number" min="0" max="100" maxlength="3" value="100">%
    </p>
        <p>
            <label>Timer:</label>
            0 seconds
        </p>
    </fieldset>


    <fieldset>
        <legend>Program</legend>
        <table class="program">
            <tr><th>#</th><th>Component</th><th>Action</th></tr>
            @sequence.friendlySteps.map {step =>
            <tr id="step@step.stepId">
                <td>@step.stepId</td>
                <td id="stepDevice@step.stepId">@step.deviceDesc</td>
                <td id="stepDesc@step.stepId">@step.eventDesc @step.temperature @step.duration</td>
            </tr>
            }
        </table>
    </fieldset>


    <p class="form-field">
        <button type="submit" class="button" value="Next">@Messages("Start")</button>
    </p>
</div>
}

<script type="text/javascript">

   <!--$(".program").children().css({"color": "red", "border": "2px solid red"});-->




   function highlightSteps(current){
     var steps = $(".program").children().children();
     for(var i=1; i<current; i++){$("#"+steps[i].id).addClass("ran");}
     $("#step"+current).addClass("running");
     for(var i=current+1; i<steps.length; i++){$("#"+steps[i].id).addClass("to-run");}
   }

$(function() {sequencerStatusCall();});

var sequencerStatusCall = function() {
    var ajaxCallBack = {
        success : onSuccess,
        error : onError
    }

    jsRoutes.controllers.Application.sequencerStatus().ajax(ajaxCallBack);
};

var  onSuccess = function(data) {
    highlightSteps(data)
}

var onError = function(error) {
    alert(error);
}


</script>
